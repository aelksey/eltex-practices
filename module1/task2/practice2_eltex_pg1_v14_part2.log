Лог работы – команды и результаты в записать в файл practice2_${MYUSER}_part2.log, где MYUSER – переменная с именем пользователя практики 1.

export MYUSER=eltex_pg1_v14
touch practice2_"$MYUSER"_part2.log

1. Найдите все записи из лога загрузки, доступного через команду journalctl с опцией -b в первые 20 секунд  с момента загрузки, начало загрузки определить автоматически.

who -b

system boot  2025-07-11 02:20

journalctl -b --since 02:20 --until 02:20:20

Jul 13 02:20:10 eltex-practice2-pg1-v14 systemd[1]: Starting sysstat-collect.service - system activity accounting tool...
Jul 13 02:20:10 eltex-practice2-pg1-v14 systemd[1]: sysstat-collect.service: Deactivated successfully.
Jul 13 02:20:10 eltex-practice2-pg1-v14 systemd[1]: Finished sysstat-collect.service - system activity accounting tool.


2. Используя awk найдите все источники и их сообщения в файле auth.log (найдите его find), в названии источника удалите информацию об идентификаторе процесса при помощи sed, полученный результат отсортируйте по названию источника

find /var auth.log | grep auth.log.1
find: ‘auth.log’/var/log/auth.log.1

awk '{print $2, $3, $4, $5}' /var/log/auth.log.1 | sed 's/\[\+[0-9]*\+\]//g' | sort

eltex-practice2-pg1-v14 chage: changed password
eltex-practice2-pg1-v14 chage: changed password
eltex-practice2-pg1-v14 chage: changed password
eltex-practice2-pg1-v14 CRON: pam_unix(cron:session): session
eltex-template su: (to root)
eltex-template systemd-logind: Creating /run/nologin,
eltex-template systemd-logind: New seat
localhost userdel: delete user
localhost userdel: removed group

3. Для результата из предыдущего пункта найдите количество повторений для каждого источника и выведите их в виде списка «число_повторений источник», результат отсортируйте по убыванию количества повторений

awk '{print $2, $3, $4, $5}' /var/log/auth.log.1 | sed 's/\[\+[0-9]*\+\]//g' | awk '{print $1}' | sort | uniq -c | sort -nr -k 1

567 localhost
478 eltex-practice2-pg1-v14
128 eltex-template

4. В файле /etc/passwd найдите всех пользователей в системе, у которых установлен shell /usr/sbin/nologin и выведите их в виде списка: «UID, username, список его групп», отсортированный в обратном порядке по UID, cписок групп используйте из файла /etc/group

awk -F : '{if($7 == "/usr/sbin/nologin")print $3, $1, $4}' /etc/passwd | sort -nr -k 1

65534 nobody 65534
998 systemd-network 998
997 systemd-timesync 997
992 systemd-resolve 992
991 polkitd 991
989 fwupd-refresh 989
109 sshd 65534
108 usbmux 46
107 landscape 109
105 tcpdump 107
104 uuidd 105
103 syslog 104
101 messagebus 102
42 _apt 65534
39 irc 39
38 list 38
34 backup 34
33 www-data 33
13 proxy 13
10 uucp 10
9 news 9
8 mail 8
7 lp 7
6 man 12
5 games 60
3 sys 3
2 bin 2
1 daemon 1

5. Найдите в результате вывода dmesg все строки, содержащие слово 'kernel‘

dmesg | grep kernel

[    0.076448] Booting paravirtualized kernel on KVM
[    0.078384] Unknown kernel command line parameters "BOOT_IMAGE=/vmlinuz-6.8.0-55-generic", will be passed to user space.
[    0.157370] Memory: 3933488K/4193760K available (22528K kernel code, 4443K rwdata, 14344K rodata, 4988K init, 4716K bss, 260012K reserved, 0K cma-reserved)
[    0.883276] Loaded X.509 cert 'Build time autogenerated kernel key: e0bedf6fa049a1e09bd65ebab3904f14cdd5bc68'
[    1.003887] Loaded X.509 cert 'Build time autogenerated kernel key: e0bedf6fa049a1e09bd65ebab3904f14cdd5bc68'
[    1.057802] Freeing unused kernel image (initmem) memory: 4988K
[    1.058907] Write protecting the kernel read-only data: 38912k
[    1.061565] Freeing unused kernel image (rodata/data gap) memory: 2040K
[    6.533871] systemd[1]: Listening on systemd-udevd-kernel.socket - udev Kernel Socket.
[    6.632117] systemd[1]: Mounting sys-kernel-debug.mount - Kernel Debug File System...
[    6.647512] systemd[1]: Mounting sys-kernel-tracing.mount - Kernel Trace File System...


6. Подсчитайте количество строк в файле /var/log/kern.log

wc -l /var/log/kern.log
 
10 /var/log/kern.log

7. Отформатируйте вывод записей в /var/log/apt/history.log в следующем порядке, построчно:

awk '{if($1 == "Commandline:")print $1, $2}' /var/log/apt/history.log ; awk '{if($1 == "Start-Date:")print $1,$2,$3}' /var/log/apt/history.log ; awk '{if($1 == "End-Date:")print $1,$2,$3}' /var/log/apt/history.log

Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: apt-get
Commandline: /usr/bin/unattended-upgrades
Commandline: apt
Commandline: apt
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: /usr/bin/unattended-upgrade
Commandline: apt-get
Commandline: apt
Start-Date: 2025-02-16 20:51:22
Start-Date: 2025-02-16 20:51:26
Start-Date: 2025-02-16 20:51:31
Start-Date: 2025-02-16 20:51:35
Start-Date: 2025-02-16 20:51:39
Start-Date: 2025-02-16 20:51:44
Start-Date: 2025-02-16 20:51:48
Start-Date: 2025-02-16 20:51:52
Start-Date: 2025-02-16 20:51:56
Start-Date: 2025-02-16 20:52:00
Start-Date: 2025-02-16 20:52:04
Start-Date: 2025-02-16 20:52:09
Start-Date: 2025-02-16 20:52:13
Start-Date: 2025-02-16 20:52:17
Start-Date: 2025-02-16 20:52:21
Start-Date: 2025-02-16 20:52:25
Start-Date: 2025-02-16 20:52:29
Start-Date: 2025-02-16 20:52:34
Start-Date: 2025-02-16 20:52:38
Start-Date: 2025-02-16 20:52:42
Start-Date: 2025-02-16 20:52:46
Start-Date: 2025-02-16 20:52:50
Start-Date: 2025-02-16 20:52:54
Start-Date: 2025-02-16 20:52:58
Start-Date: 2025-02-16 20:53:02
Start-Date: 2025-02-16 20:53:06
Start-Date: 2025-02-16 20:53:11
Start-Date: 2025-02-16 20:53:15
Start-Date: 2025-02-16 20:53:19
Start-Date: 2025-02-16 20:53:25
Start-Date: 2025-02-16 20:53:29
Start-Date: 2025-02-16 20:53:33
Start-Date: 2025-02-16 20:53:37
Start-Date: 2025-02-16 20:53:41
Start-Date: 2025-02-16 20:53:45
Start-Date: 2025-02-16 20:53:49
Start-Date: 2025-02-16 20:53:53
Start-Date: 2025-02-16 20:53:57
Start-Date: 2025-02-16 20:54:01
Start-Date: 2025-02-16 20:54:05
Start-Date: 2025-02-16 20:54:10
Start-Date: 2025-02-16 20:54:14
Start-Date: 2025-02-16 20:54:18
Start-Date: 2025-02-16 20:54:22
Start-Date: 2025-02-16 20:54:26
Start-Date: 2025-02-16 20:54:30
Start-Date: 2025-02-16 20:54:34
Start-Date: 2025-02-16 20:54:38
Start-Date: 2025-02-16 20:54:42
Start-Date: 2025-02-16 20:54:46
Start-Date: 2025-02-16 20:54:50
Start-Date: 2025-02-16 20:54:54
Start-Date: 2025-02-16 20:54:58
Start-Date: 2025-02-16 20:55:03
Start-Date: 2025-02-16 20:55:07
Start-Date: 2025-02-16 20:55:11
Start-Date: 2025-02-16 20:55:15
Start-Date: 2025-02-16 20:55:19
Start-Date: 2025-02-16 20:55:23
Start-Date: 2025-02-16 20:55:27
Start-Date: 2025-02-16 20:55:31
Start-Date: 2025-02-16 20:55:35
Start-Date: 2025-02-16 20:55:38
Start-Date: 2025-02-16 20:55:42
Start-Date: 2025-02-16 20:55:46
Start-Date: 2025-02-16 20:55:51
Start-Date: 2025-02-16 20:55:55
Start-Date: 2025-02-16 20:55:59
Start-Date: 2025-02-16 20:56:03
Start-Date: 2025-02-16 20:56:07
Start-Date: 2025-02-16 20:56:11
Start-Date: 2025-02-16 20:56:15
Start-Date: 2025-02-16 20:56:19
Start-Date: 2025-02-16 20:56:23
Start-Date: 2025-02-16 20:56:28
Start-Date: 2025-02-16 20:56:32
Start-Date: 2025-02-16 20:56:36
Start-Date: 2025-02-16 20:56:39
Start-Date: 2025-02-16 20:56:43
Start-Date: 2025-02-16 20:56:47
Start-Date: 2025-02-16 20:56:52
Start-Date: 2025-02-16 20:56:55
Start-Date: 2025-02-16 20:57:00
Start-Date: 2025-02-16 20:57:04
Start-Date: 2025-02-16 20:57:08
Start-Date: 2025-02-16 20:57:12
Start-Date: 2025-02-16 20:57:16
Start-Date: 2025-02-16 20:57:20
Start-Date: 2025-02-16 20:57:24
Start-Date: 2025-02-16 20:57:28
Start-Date: 2025-02-16 20:57:34
Start-Date: 2025-02-16 20:57:39
Start-Date: 2025-02-16 20:57:42
Start-Date: 2025-02-16 20:58:40
Start-Date: 2025-02-16 20:59:26
Start-Date: 2025-02-16 20:59:50
Start-Date: 2025-02-16 21:00:04
Start-Date: 2025-02-16 21:00:10
Start-Date: 2025-03-12 18:07:37
Start-Date: 2025-03-12 18:08:37
Start-Date: 2025-03-12 18:12:45
Start-Date: 2025-03-12 18:13:21
Start-Date: 2025-03-12 18:19:08
Start-Date: 2025-03-12 18:21:23
Start-Date: 2025-07-12 06:14:42
Start-Date: 2025-07-12 06:17:03
Start-Date: 2025-07-12 06:18:07
Start-Date: 2025-07-12 06:19:18
Start-Date: 2025-07-12 06:20:43
Start-Date: 2025-07-12 06:22:12
Start-Date: 2025-07-12 06:23:03
Start-Date: 2025-07-12 06:25:57
Start-Date: 2025-07-12 06:26:37
Start-Date: 2025-07-12 06:28:00
Start-Date: 2025-07-12 06:29:25
Start-Date: 2025-07-12 06:29:45
Start-Date: 2025-07-12 06:31:25
Start-Date: 2025-07-12 06:37:37
Start-Date: 2025-07-12 06:39:16
Start-Date: 2025-07-12 06:39:45
Start-Date: 2025-07-12 06:40:16
Start-Date: 2025-07-12 06:41:40
Start-Date: 2025-07-12 06:44:05
Start-Date: 2025-07-12 06:44:36
Start-Date: 2025-07-12 06:45:50
Start-Date: 2025-07-12 06:46:12
Start-Date: 2025-07-12 06:46:34
Start-Date: 2025-07-12 06:46:55
Start-Date: 2025-07-12 06:47:29
Start-Date: 2025-07-12 06:49:04
Start-Date: 2025-07-12 06:49:19
Start-Date: 2025-07-12 06:50:00
Start-Date: 2025-07-12 06:50:26
Start-Date: 2025-07-12 06:50:49
Start-Date: 2025-07-12 06:51:28
Start-Date: 2025-07-12 06:52:25
Start-Date: 2025-07-13 04:42:11
Start-Date: 2025-07-13 04:46:30
End-Date: 2025-02-16 20:51:24
End-Date: 2025-02-16 20:51:28
End-Date: 2025-02-16 20:51:32
End-Date: 2025-02-16 20:51:37
End-Date: 2025-02-16 20:51:41
End-Date: 2025-02-16 20:51:45
End-Date: 2025-02-16 20:51:49
End-Date: 2025-02-16 20:51:53
End-Date: 2025-02-16 20:51:58
End-Date: 2025-02-16 20:52:02
End-Date: 2025-02-16 20:52:06
End-Date: 2025-02-16 20:52:10
End-Date: 2025-02-16 20:52:14
End-Date: 2025-02-16 20:52:18
End-Date: 2025-02-16 20:52:23
End-Date: 2025-02-16 20:52:27
End-Date: 2025-02-16 20:52:31
End-Date: 2025-02-16 20:52:35
End-Date: 2025-02-16 20:52:39
End-Date: 2025-02-16 20:52:43
End-Date: 2025-02-16 20:52:47
End-Date: 2025-02-16 20:52:51
End-Date: 2025-02-16 20:52:56
End-Date: 2025-02-16 20:53:00
End-Date: 2025-02-16 20:53:04
End-Date: 2025-02-16 20:53:08
End-Date: 2025-02-16 20:53:12
End-Date: 2025-02-16 20:53:17
End-Date: 2025-02-16 20:53:22
End-Date: 2025-02-16 20:53:26
End-Date: 2025-02-16 20:53:30
End-Date: 2025-02-16 20:53:34
End-Date: 2025-02-16 20:53:38
End-Date: 2025-02-16 20:53:42
End-Date: 2025-02-16 20:53:46
End-Date: 2025-02-16 20:53:50
End-Date: 2025-02-16 20:53:54
End-Date: 2025-02-16 20:53:59
End-Date: 2025-02-16 20:54:03
End-Date: 2025-02-16 20:54:07
End-Date: 2025-02-16 20:54:11
End-Date: 2025-02-16 20:54:15
End-Date: 2025-02-16 20:54:19
End-Date: 2025-02-16 20:54:23
End-Date: 2025-02-16 20:54:27
End-Date: 2025-02-16 20:54:32
End-Date: 2025-02-16 20:54:36
End-Date: 2025-02-16 20:54:39
End-Date: 2025-02-16 20:54:43
End-Date: 2025-02-16 20:54:48
End-Date: 2025-02-16 20:54:52
End-Date: 2025-02-16 20:54:56
End-Date: 2025-02-16 20:55:00
End-Date: 2025-02-16 20:55:04
End-Date: 2025-02-16 20:55:08
End-Date: 2025-02-16 20:55:12
End-Date: 2025-02-16 20:55:16
End-Date: 2025-02-16 20:55:20
End-Date: 2025-02-16 20:55:24
End-Date: 2025-02-16 20:55:28
End-Date: 2025-02-16 20:55:32
End-Date: 2025-02-16 20:55:36
End-Date: 2025-02-16 20:55:40
End-Date: 2025-02-16 20:55:44
End-Date: 2025-02-16 20:55:48
End-Date: 2025-02-16 20:55:52
End-Date: 2025-02-16 20:55:56
End-Date: 2025-02-16 20:56:00
End-Date: 2025-02-16 20:56:04
End-Date: 2025-02-16 20:56:08
End-Date: 2025-02-16 20:56:13
End-Date: 2025-02-16 20:56:17
End-Date: 2025-02-16 20:56:21
End-Date: 2025-02-16 20:56:25
End-Date: 2025-02-16 20:56:29
End-Date: 2025-02-16 20:56:33
End-Date: 2025-02-16 20:56:37
End-Date: 2025-02-16 20:56:41
End-Date: 2025-02-16 20:56:45
End-Date: 2025-02-16 20:56:49
End-Date: 2025-02-16 20:56:53
End-Date: 2025-02-16 20:56:57
End-Date: 2025-02-16 20:57:01
End-Date: 2025-02-16 20:57:05
End-Date: 2025-02-16 20:57:09
End-Date: 2025-02-16 20:57:13
End-Date: 2025-02-16 20:57:17
End-Date: 2025-02-16 20:57:21
End-Date: 2025-02-16 20:57:26
End-Date: 2025-02-16 20:57:30
End-Date: 2025-02-16 20:57:38
End-Date: 2025-02-16 20:57:39
End-Date: 2025-02-16 20:58:20
End-Date: 2025-02-16 20:59:23
End-Date: 2025-02-16 20:59:43
End-Date: 2025-02-16 21:00:01
End-Date: 2025-02-16 21:00:04
End-Date: 2025-02-16 21:00:28
End-Date: 2025-03-12 18:08:03
End-Date: 2025-03-12 18:11:58
End-Date: 2025-03-12 18:13:11
End-Date: 2025-03-12 18:14:11
End-Date: 2025-03-12 18:21:04
End-Date: 2025-03-12 18:21:31
End-Date: 2025-07-12 06:16:58
End-Date: 2025-07-12 06:18:03
End-Date: 2025-07-12 06:19:15
End-Date: 2025-07-12 06:20:40
End-Date: 2025-07-12 06:22:10
End-Date: 2025-07-12 06:22:58
End-Date: 2025-07-12 06:25:54
End-Date: 2025-07-12 06:26:35
End-Date: 2025-07-12 06:27:54
End-Date: 2025-07-12 06:29:23
End-Date: 2025-07-12 06:29:43
End-Date: 2025-07-12 06:31:20
End-Date: 2025-07-12 06:37:34
End-Date: 2025-07-12 06:39:14
End-Date: 2025-07-12 06:39:42
End-Date: 2025-07-12 06:40:13
End-Date: 2025-07-12 06:41:36
End-Date: 2025-07-12 06:44:02
End-Date: 2025-07-12 06:44:30
End-Date: 2025-07-12 06:45:47
End-Date: 2025-07-12 06:46:07
End-Date: 2025-07-12 06:46:31
End-Date: 2025-07-12 06:46:52
End-Date: 2025-07-12 06:47:27
End-Date: 2025-07-12 06:49:00
End-Date: 2025-07-12 06:49:16
End-Date: 2025-07-12 06:49:57
End-Date: 2025-07-12 06:50:22
End-Date: 2025-07-12 06:50:44
End-Date: 2025-07-12 06:51:25
End-Date: 2025-07-12 06:52:22
End-Date: 2025-07-12 06:52:45
End-Date: 2025-07-13 04:42:14
End-Date: 2025-07-13 04:46:34

Commandline: … ; Start-Date: … ; End-Date: …
